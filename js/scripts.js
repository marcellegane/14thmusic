function setAudioSrc(a,i){a.src=i}function setAudioFormat(a){$.each(samples,function(i,e){setAudioSrc(e.audio,e.src+a)})}function canPlayAudio(a){var i=document.createElement("audio");return!(!i.canPlayType||!i.canPlayType("audio/"+a+";").replace(/no/,""))}function getAudioExtension(){var a="wav";return canPlayAudio("ogg")?a=".ogg":canPlayAudio("mp4")?a=".m4a":canPlayAudio("aac")?a=".aac":canPlayAudio("mp3")&&(a=".mp3"),a}var samples=[];$(".sample").each(function(a){var i=new Audio,e=$(this).data("file"),n={audio:i,src:e};samples.push(n)}),$.each(samples,function(a,i){i.audio.addEventListener("timeupdate",function(){i.audio.currentTime>=i.audio.duration-.2&&(i.audio.currentTime=0,i.audio.play(0))})}),setAudioFormat(getAudioExtension()),$(window).load(function(){$.each(samples,function(a,i){i.audio.volume=0}),$(".sample").on("click",function(){var a=$(this).data("index");return $.each(samples,function(a,i){i.audio.play()}),$(this).hasClass("playing")?($(this).removeClass("playing"),$(samples[a].audio).animate({volume:0},1e3)):($(this).addClass("playing"),$(samples[a].audio).animate({volume:1},1e3)),!1})});